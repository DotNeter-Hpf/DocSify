## 1.å®ä½“ä½¿ç”¨è‡ªå¸¦ç‰¹æ€§
`å¯¹äºCURDæ¥è¯´ï¼Œåªéœ€è¦é…ç½®ä¸»é”®å’Œè‡ªå¢åˆ—å°±è¡Œï¼›ç±»çš„åç§°å’Œæ•°æ®åº“è¡¨åä¸åŒæ—¶ï¼Œä¹Ÿå¯è®¾ç½®`
### 1.1 ä¸»é”®è‡ªå¢
```csharp
[SugarTable("dbstudent")]//å½“å’Œæ•°æ®åº“åç§°ä¸ä¸€æ ·å¯ä»¥è®¾ç½®è¡¨åˆ«å æŒ‡å®šè¡¨æ˜
public class Student
{
    [SugarColumn(IsPrimaryKey = true, IsIdentity = true)]//æ•°æ®åº“æ˜¯è‡ªå¢æ‰é…è‡ªå¢ 
    public int Id { get; set; }

    public int? SchoolId { get; set; }

    [SugarColumn(ColumnName = "StudentName")]//æ•°æ®åº“ä¸å®ä½“ä¸ä¸€æ ·è®¾ç½®åˆ—å 
    public string Name { get; set; }
}
```

```csharp
//åˆ›å»ºè¡¨è¯­å¥
db.CodeFirst.SetStringDefaultLength(200).InitTables(typeof(Student));
```


### 1.2 å¤šä¸ªä¸»é”®
```csharp
publicÂ classÂ Student
{
Â Â Â Â [SugarColumn(IsPrimaryKeyÂ =Â true)]Â //è®¾ç½®ä¸»é”®
Â Â Â Â publicÂ GuidÂ Â Pk1{Â get;Â set;Â }
Â Â Â Â [SugarColumn(IsPrimaryKeyÂ =Â true)]Â //è®¾ç½®ä¸»é”®
Â Â Â Â publicÂ GuidÂ Â Pk2{Â get;Â set;Â }
Â Â Â Â publicÂ stringÂ NameÂ {Â get;Â set;Â }
}
```


### 1.3 æ— ä¸»é”®
```csharp
publicÂ classÂ Student
{
Â Â Â Â publicÂ GuidÂ Â Id{Â get;Â set;Â }
Â Â Â Â publicÂ stringÂ NameÂ {Â get;Â set;Â }
}
```


## 2.å®ä½“ä½¿ç”¨è‡ªå®šä¹‰ç‰¹æ€§
ç›´æ¥ä¸Šæ¡ˆä¾‹ï¼Œæºç ä¸­è‡ªå·±æ‘¸ç´¢çš„ï¼Œç›®å‰æƒ³ä¸åˆ°å“ªé‡Œèƒ½ç”¨å¾—åˆ°

### 2.1 åˆ›å»ºç‰¹æ€§çš„ç±»
```csharp
    /// <summary>
    /// è‡ªå®šä¹‰ç±»(è¡¨)ç‰¹æ€§
    /// </summary>
    [AttributeUsage(AttributeTargets.Class, Inherited = true)]
    public class CustomeAttributeClass : Attribute
    {
        //æœ‰å‚æ„é€ 
        public CustomeAttributeClass(string str)
        {
            testClass = str + "Test";
        }

        public string testClass { get; set; }
    }


Â Â Â /// <summary>
    /// è‡ªå®šä¹‰å±æ€§(åˆ—)ç‰¹æ€§
    /// </summary>
    [AttributeUsage(AttributeTargets.Property, Inherited = true)]
    public class CustomeAttributeColumn : Attribute
    {
        public CustomeAttributeColumn()
        {
        }

        private string testColumn;

        public string TestColumn
        {
            get { return testColumn; }
            set { testColumn = value; }
        }
    }
```
### 2.2 åˆ›å»ºå¸¦è‡ªå®šä¹‰ç‰¹æ€§çš„å®ä½“ç±»
```csharp
Â  [CustomeAttributeClass("At")]
    public class TestModel
    {
        public int Id { get; set; }

        [CustomeAttributeColumn(TestColumn = "Ac")]
        public string Name { get; set; }

        public int Age { get; set; }
    }
```

### 2.3åœ¨åˆ›å»ºSqlSugarClientå¯¹è±¡ä¸­æ·»åŠ ä»£ç 
```csharp
SqlSugarClient db = new SqlSugarClient(new ConnectionConfig()
            {
                DbType = SqlSugar.DbType.MySql,
                ConnectionString = "server = 127.0.0.1; Database = sugarlearn; Uid = root; Pwd = root; AllowLoadLocalInfile = true;",
                InitKeyType = InitKeyType.Attribute,
                IsAutoCloseConnection = true,

                //è‡ªå®šä¹‰ç‰¹æ€§
                ConfigureExternalServices = new ConfigureExternalServices()
                {
                    //å±æ€§(åˆ—)çš„å¤„ç†
                    EntityService = (property, column) =>
                    {
                        var attributes = property.GetCustomAttributes(true);//get all attributes 

                        if (attributes.Any(it => it is CustomeAttributeColumn))// by attribute set primarykey
                        {
                            column.DbColumnName = (attributes.First(it => it is CustomeAttributeColumn) as CustomeAttributeColumn).TestColumn;
                        }
                    },
                    //ç±»(è¡¨)çš„å¤„ç†
                    EntityNameService = (type, entity) =>
                    {
                        var attributes = type.GetCustomAttributes(true);

                        if (attributes.Any(it => it is CustomeAttributeClass))
                        {
                            entity.DbTableName = (attributes.First(it => it is CustomeAttributeClass) as CustomeAttributeClass).testClass;
                        }
                    }
                }
            });
```

### 2.4æ·»åŠ åˆ›å»ºè¡¨çš„ä»£ç ï¼ŒæŸ¥çœ‹æ•ˆæœ

```csharp
static void Main(string[] args)
        {
            var db = Sugar.GetInstance();

            //æ–°å¢è¡¨
            db.CodeFirst.SetStringDefaultLength(200).InitTables(typeof(TestModel));

            Console.ReadLine();
        }
```

## 3.å®ä½“ä¸ä½¿ç”¨ç‰¹æ€§
`åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œæ ¹æ®è§„åˆ™ï¼ŒæŒ‡å®šå“ªä¸ªå­—æ®µä¸»é”®ï¼Œå“ªä¸ªå­—æ®µè‡ªå¢ï¼›è¿™æ ·å°±ä¸éœ€è¦åœ¨å®ä½“æ·»åŠ ç‰¹æ€§`
```csharp
varÂ db=Â newÂ SqlSugarClient(newÂ ConnectionConfig()
{
Â DbTypeÂ =Â SqlSugar.DbType.MySql,
Â ConnectionStringÂ =Â Config.ConnectionString,
Â sAutoCloseConnectionÂ =Â true,
Â ConfigureExternalServices=newÂ ConfigureExternalServices()Â {
Â Â Â Â EntityServiceÂ =Â (t,Â column)Â =>Â 
Â Â Â Â {
Â Â Â Â Â Â Â Â ifÂ (column.PropertyName.ToLower()Â ==Â "id")Â //æ˜¯idçš„è®¾ä¸ºä¸»é”®
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â column.IsPrimarykeyÂ =Â true;
Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (column.PropertyInfo.PropertyTypeÂ ==Â typeof(int))Â //æ˜¯idå¹¶ä¸”æ˜¯intçš„æ˜¯è‡ªå¢
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â column.IsIdentityÂ =Â true;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
});
```

## 4.ç‰¹æ€§æ˜ç»†

ä¸‹é¢æ˜¯CRUDç”¨åˆ°çš„ç‰¹æ€§ï¼Œä¸åŒ…å«å»ºè¡¨çš„å±æ€§

| åç§° | æè¿° |
| --- | --- |
| IsIdentity | è‡ªå¢åˆ— |
| IsPrimaryKey | åˆ›å»ºä¸»é”® |
| ColumnName | å®ä½“ç±»å±æ€§å’Œæ•°æ®åº“åˆ—åä¸åŒæ—¶ï¼Œè®¾ç½®æ•°æ®åº“åˆ—å |
| IsIgnore | ORMä¸å¤„ç†è¯¥åˆ— [å³å¿½ç•¥] |
| IsOnlyIgnoreInsert | æ’å…¥æ“ä½œæ—¶ä¸å¤„ç†è¯¥åˆ— [æ’å…¥æ—¶å¿½ç•¥] |
| IsOnlyIgnoreUpdate | æ›´æ–°æ“ä½œæ—¶ä¸å¤„ç†è¯¥åˆ— [æ›´æ–°æ—¶å¿½ç•¥] |
| OracleSequenceName | è®¾ç½®Oracleåºåˆ—ï¼Œè®¾ç½®åè¯¥åˆ—ç­‰åŒäºè‡ªå¢åˆ— |
| ColumnDescription | å¤‡æ³¨ |
| Length | é•¿åº¦ |
| IsNullable | æ˜¯å¦å¯ä»¥ä¸ºNullï¼›é»˜è®¤False |
| DecimalDigits | ç²¾åº¦ï¼›decimal(18,2),Length=19,DecimalDigits=2 |
| OldColumnName | ä¿®æ”¹åˆ—åç”¨ï¼Œè¿™æ ·ä¸ä¼šæ–°å¢æˆ–åˆ é™¤åˆ— |
| IsDisabledDelete | ç¦æ­¢åˆ é™¤åˆ— |
| IsDisabledUpdateAll | ç¦æ­¢æ‰€æœ‰æ›´æ–°è¡¨çš„æ“ä½œ |
| ColumnDataType | å­—æ®µç±»å‹ |



* * *

**`æ³¨æ„ï¼š`**

* EntityInfoï¼šå…³äºæ•°æ®åº“è¡¨çš„ä¸€äº›å±æ€§
* EntityColumnInfoï¼šå…³äºæ•°æ®åº“è¡¨å­—æ®µçš„ä¸€äº›å±æ€§


[ğŸ“„æ–‡æ¡£å‚è€ƒï¼šå®ä½“é…ç½®](https://www.donet5.com/home/Doc?typeId=1182)


<div id="NavigateDiv">
<h4>ç›®å½•å¯¼èˆª</h4>
<table style="border:none;">
    <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_1å®ä½“ä½¿ç”¨è‡ªå¸¦ç‰¹æ€§" > 1.å®ä½“ä½¿ç”¨è‡ªå¸¦ç‰¹æ€§ </a></td>
    </tr>
    <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_11-ä¸»é”®è‡ªå¢" > &emsp;1.1 ä¸»é”®è‡ªå¢ </a></td>
    </tr>
     <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_12-å¤šä¸ªä¸»é”®" > &emsp;1.2 å¤šä¸ªä¸»é”® </a></td>
    </tr>
     <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_13-æ— ä¸»é”®" > &emsp;1.3 æ— ä¸»é”® </a></td>
    </tr>
     <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_2å®ä½“ä½¿ç”¨è‡ªå®šä¹‰ç‰¹æ€§" > 2.å®ä½“ä½¿ç”¨è‡ªå®šä¹‰ç‰¹æ€§ </a></td>
    </tr>
     <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_21-åˆ›å»ºç‰¹æ€§çš„ç±»" >  &emsp;2.1 åˆ›å»ºç‰¹æ€§çš„ç±» </a></td>
    </tr>
     <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_22-åˆ›å»ºå¸¦è‡ªå®šä¹‰ç‰¹æ€§çš„å®ä½“ç±»" > &emsp;2.2 åˆ›å»ºå¸¦è‡ªå®šä¹‰ç‰¹æ€§çš„å®ä½“ç±» </a></td>
    </tr>
    <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_23åœ¨åˆ›å»ºsqlsugarclientå¯¹è±¡ä¸­æ·»åŠ ä»£ç " > &emsp;2.3åœ¨åˆ›å»ºSqlSugarClientå¯¹è±¡ä¸­æ·»åŠ ä»£ç  </a></td>
    </tr>
    <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_24æ·»åŠ åˆ›å»ºè¡¨çš„ä»£ç ï¼ŒæŸ¥çœ‹æ•ˆæœ" > &emsp;2.4æ·»åŠ åˆ›å»ºè¡¨çš„ä»£ç ï¼ŒæŸ¥çœ‹æ•ˆæœ </a></td>
    </tr>
    <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_3å®ä½“ä¸ä½¿ç”¨ç‰¹æ€§" > 3.å®ä½“ä¸ä½¿ç”¨ç‰¹æ€§ </a></td>
    </tr>
    <tr style="border:none;">
    <td style="border:none;width:300px"><a style="color:black" href="/#/SqlSugar/ä»é›¶å¼€å§‹/å®ä½“é…ç½®?id=_4ç‰¹æ€§æ˜ç»†" > 4.ç‰¹æ€§æ˜ç»† </a></td>
    </tr>
</table>
</div>